<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Krynet Watch Together</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
/* Reset & basics */
* { box-sizing:border-box; margin:0; padding:0; }
body { font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif; background:#0f0f0f; color:#eee; }

/* Header */
header { display:flex; gap:.5rem; padding:1rem; background:#181818; border-bottom:1px solid #222; }
input { flex:1; padding:.6rem 1rem; border-radius:9999px; border:none; background:#222; color:#eee; font-size:1rem; }
button { padding:.6rem 1rem; border:none; border-radius:9999px; background:#bb86fc; color:#121212; font-weight:600; cursor:pointer; }

/* Layout */
.container { display:flex; height:calc(100vh - 72px); overflow:hidden; }
.player { flex:2; background:#000; }
.feed { flex:1; background:#111; overflow-y:auto; border-left:1px solid #222; }

/* Iframes */
iframe { width:100%; height:100%; border:none; }

/* Responsive for small screens */
@media(max-width:900px){
  .container { flex-direction:column; }
  .player { height:50vh; }
  .feed { height:50vh; border-left:none; border-top:1px solid #222; }
}
</style>
</head>

<body>

<header>
  <input id="input" placeholder="Search or paste YouTube / Piped URLâ€¦" />
  <button id="go">Go</button>
</header>

<div class="container">
  <div class="player">
    <iframe id="video" src="https://piped.private.coffee/trending"></iframe>
  </div>
  <div class="feed">
    <iframe id="feed" src="https://piped.private.coffee/trending"></iframe>
  </div>
</div>

<script type="module">
const input = document.getElementById('input');
const go = document.getElementById('go');
const video = document.getElementById('video');
const feed = document.getElementById('feed');

function getVideoID(value){
  try { 
    const url = new URL(value); 
    return url.searchParams.get('v'); 
  } catch { 
    return value.trim(); 
  }
}

function loadVideo(videoId){
  if(!videoId) return;
  video.src = `https://piped.private.coffee/watch?v=${videoId}&autoplay=1`;
  location.hash = videoId;
}

function loadSearch(query){
  feed.src = `https://piped.private.coffee/search?q=${encodeURIComponent(query)}`;
}

go.onclick = () => {
  const value = input.value.trim();
  if(!value) return;

  const videoId = getVideoID(value);
  if(videoId && videoId.length >= 8) loadVideo(videoId);
  else loadSearch(value);
}

function loadFromHash(){
  const id = location.hash.replace('#','');
  if(id) loadVideo(id);
}

window.addEventListener('hashchange', loadFromHash);
loadFromHash();
</script>

</body>
</html>
